
- name: Build APK with Buildozer
  run: |
    # حذف پوشه‌های قدیمی
    rm -rf .buildozer 2>/dev/null || true
    
    # ساخت APK با استفاده از yes برای قبول خودکار تمام لایسنس‌ها و پرسش‌ها
    # 'yes |' قبل از دستور buildozer قرار می‌گیرد
    yes | buildozer android debug
    
    # اگر خطا داشت، دوباره امتحان کن (بدون yes)
    if [ $? -ne 0 ]; then
      echo "ساخت اول شکست خورد، در حال تلاش مجدد..."
      buildozer android debug
    fi
